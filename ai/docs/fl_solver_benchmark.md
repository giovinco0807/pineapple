# FL Solver ベンチマーク結果

**日付:** 2026-02-07  
**データセット:** 各10,000ハンド (ランダムジョーカー)

---

## ソルバー性能

| Version | アルゴリズム | 14枚 速度 | 15枚 速度 |
|---------|-------------|----------|----------|
| V1 | 網羅探索 | ~10/s | ~3/s |
| **V2** | **役ベース枝刈り** | **148.7/s** | **31.4/s** |

### V2 役ベースアルゴリズム
- **Phase A:** Bottom FL Stay (Royal Flush → Straight Flush → Quads)
- **Phase B:** Top FL Stay (Trips)
- **Phase C:** No FL Stay (Full House → Flush → Straight)
- 早期終了による枝刈り

---

## 14枚 統計

### ジョーカー出現分布

| ジョーカー数 | サンプル数 | 割合 |
|-------------|------------|------|
| 0枚 | 5,370 | 53.7% |
| 1枚 | 4,022 | 40.2% |
| 2枚 | 608 | 6.1% |

### FL Stay 統計

| ジョーカー数 | FL Stay率 | 平均ロイヤリティ |
|-------------|-----------|-----------------|
| 0枚 | 13.6% | 13.51 |
| 1枚 | 71.0% | 17.48 |
| 2枚 | 100% | 26.41 |

### 加重平均計算

| ジョーカー | 出現率 | FL Stay率 | 寄与 |
|-----------|--------|-----------|------|
| 0枚 | 53.7% | 13.6% | 7.30% |
| 1枚 | 40.2% | 71.0% | 28.54% |
| 2枚 | 6.1% | 100% | 6.10% |

**14枚全体 FL Stay率 = 38.44%**, 平均ロイヤリティ: 15.34点

---

## 15枚 統計

### ジョーカー出現分布

| ジョーカー数 | サンプル数 | 割合 |
|-------------|------------|------|
| 0枚 | 5,218 | 52.2% |
| 1枚 | 4,058 | 40.6% |
| 2枚 | 724 | 7.2% |

### FL Stay 統計

| ジョーカー数 | FL Stay率 | 平均ロイヤリティ |
|-------------|-----------|-----------------|
| 0枚 | 18.5% | 14.82 |
| 1枚 | 78.4% | 19.30 |
| 2枚 | 100% | 28.42 |

### 加重平均計算

| ジョーカー | 出現率 | FL Stay率 | 寄与 |
|-----------|--------|-----------|------|
| 0枚 | 52.2% | 18.5% | 9.66% |
| 1枚 | 40.6% | 78.4% | 31.83% |
| 2枚 | 7.2% | 100% | 7.20% |

**15枚全体 FL Stay率 = 48.69%**, 平均ロイヤリティ: 19.30点

---

## 16枚 統計

### ジョーカー出現分布

| ジョーカー数 | サンプル数 | 割合 |
|-------------|------------|------|
| 0枚 | 4,950 | 49.5% |
| 1枚 | 4,195 | 42.0% |
| 2枚 | 855 | 8.6% |

### FL Stay 統計

| ジョーカー数 | FL Stay率 | 平均ロイヤリティ |
|-------------|-----------|-----------------|
| 0枚 | 35.5% | 20.06 |
| 1枚 | 90.5% | 25.86 |
| 2枚 | 100% | 35.36 |

### 加重平均計算

| ジョーカー | 出現率 | FL Stay率 | 寄与 |
|-----------|--------|-----------|------|
| 0枚 | 49.5% | 35.5% | 17.57% |
| 1枚 | 42.0% | 90.5% | 37.97% |
| 2枚 | 8.6% | 100% | 8.55% |

**16枚全体 FL Stay率 = 64.09%**, 平均ロイヤリティ: 23.80点

---

## 比較サマリー

| カード枚数 | FL Stay率 | 平均ロイヤリティ | 生成速度 |
|-----------|-----------|-----------------|---------|
| **14枚** | 38.44% | 15.34 | 148.7/s |
| **15枚** | 48.69% | 19.30 | 31.4/s |
| **16枚** | 64.09% | 23.80 | 7.6/s |
| **17枚** | 77.6% | 28.4 | 1.5/s |

---

## 使用方法

```powershell
.\ai\rust_solver\target\release\fl_solver.exe generate \
  --samples 10000 \
  --cards 14 \
  --output ai\data\output.jsonl

# オプション
#   --jokers 0|1|2   固定ジョーカー数 (省略でランダム)
#   --cards 14-17    カード枚数
```

---

## 出力ファイル

- `ai/data/fl_14cards_v2_10k.jsonl`
- `ai/data/fl_15cards_v2_10k.jsonl`

